<html>
<head>
  <link rel="stylesheet" href="./dist/talkie.min.css">
  <link rel="stylesheet" href="./dist/talkie-default.min.css">
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/monokai_sublime.min.css">
</head>
<body>

<script layout type="text/x-markdown">
## 6章
### Go言語による
### HTTP1.1クライアントの実装
</script>

<script layout type="text/x-markdown">
#### 本章で学ぶこと
* APIサーバーにリクエストを送るクライアントを作成する方法を学ぶ
* コードを使って、4, 5章の理解を補強する
</script>

<script layout type="text/x-markdown">
### 6.1 Keep-Alive
</script>

<script layout type="text/x-markdown">
* GoのHTTP APIは、デフォルトでKeep-Aliveが有効になっている
* ただし、クライアントコード側で、必ず`response.Body`を最後まで読み切ってからクローズする必要がある
* `response.Body`には、エラー以外の場合には何かしら読み切るための処理を入れる必要がある
</script>

<script layout="code" invert type="text/x-markdown">
```go
resp, err := http.Get("http://...")
if err != nil {
	// エラー発生
	panic(err)
}

// スコープが抜けたところで必ずクローズ
defer resp.Body.Close()

// ioutil.ReadAllでサーバーレスポンスを最後まで一括で読み切る
body, err := ioutil.ReadAll(resp.Body)
```

</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>

<script layout type="text/x-markdown">
### 6.
</script>

<script layout type="text/x-markdown">
*
</script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script src="./dist/talkie.min.js"></script>
<script>Talkie();</script>
</body>
</html>
